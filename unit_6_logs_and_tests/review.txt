уже лучше
но я все равно не понимаю, зачем тебе сканер в сервисах?
это все должно быть на уровне контроллеров, а так смешала вью и безнес логику
8 из 10